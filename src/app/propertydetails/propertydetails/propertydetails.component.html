<!--show Rates info Modal Starts Here-->
<!--<button class="btn btn-primary" (click)="showRatesInfoModal()">-->
<!--  Show Property Details-->
<!--</button>-->
<ng-template #rateNotAvailable let-modal>
  <div class="modal-header">
    <h5 class="modal-title">
      Availability and Rates
    </h5>
    <button type="button" class="btn-close" (click)="modal.dismiss()"></button>
  </div>
  <div class="modal-body">
    <div class="checkout-summary">
      <div class="checkout-summary-details">
        <div class="table-responsive">
          <h5 class="pr-2">
            Rates for this property are currently undergoing maintenance.
            Please call for rates<a href="tel:+18503125400" style="color: #33d286;">&nbsp;&nbsp;<i _ngcontent-qdo-c146="" class="fa fa-phone"></i>850-312-5400</a>
            or fill out our travel request form by clicking on Inquire or Book Now "No Obligation" button below
          </h5>
        </div>
      </div>
    </div>

    <div class="text-center">
      <button class="btn t-btn" (click)="openInquiryModal('PROPERTY INQUIRY')">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 640 640"><path d="M568.4 37.7C578.2 34.2 589 36.7 596.4 44C603.8 51.3 606.2 62.2 602.7 72L424.7 568.9C419.7 582.8 406.6 592 391.9 592C377.7 592 364.9 583.4 359.6 570.3L295.4 412.3C290.9 401.3 292.9 388.7 300.6 379.7L395.1 267.3C400.2 261.2 399.8 252.3 394.2 246.7C388.6 241.1 379.6 240.7 373.6 245.8L261.2 340.1C252.1 347.7 239.6 349.7 228.6 345.3L70.1 280.8C57 275.5 48.4 262.7 48.4 248.5C48.4 233.8 57.6 220.7 71.5 215.7L568.4 37.7z"/></svg>
        Inquire or Book Now "No Obligation"
      </button>
    </div>
  </div>
  <div class="modal-footer">
    <button class="btn btn-secondary" (click)="modal.close()">Close</button>
  </div>
</ng-template>

<ng-template #zeroRate let-modal>
  <div class="modal-header">
    <h5 class="modal-title">
      Availability and Rates
    </h5>
    <button type="button" class="btn-close" (click)="modal.dismiss()"></button>
  </div>
  <div class="modal-body">
    <div class="checkout-summary">
      <h6 class="p-2 message-text">
        <p *ngFor="let message of providerMessages"><i class="fa fa-info-circle" style="color: rgb(250, 69, 3); font-size: large"></i> {{ message }}</p>
      </h6>
      <p class="pl-2 pr-2">
        <button class="btn btn-secondary" (click)="closeModalAndNavigate('contact')">Contact Destinique</button>
      </p>
    </div>
  </div>
  <div class="modal-footer">
    <button class="btn btn-secondary" (click)="modal.close()">Close</button>
  </div>
</ng-template>

<ng-template #ratesShow let-modal>
  <div class="modal-header">
    <h5 class="modal-title">
      Availability and Rates
    </h5>
    <button type="button" class="btn-close" (click)="modal.dismiss()"></button>
  </div>
  <div class="modal-body">
    <div class="checkout-summary">
      <h6>
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-shield-exclamation" viewBox="0 0 16 16">
          <path d="M5.338 1.59a61 61 0 0 0-2.837.856.48.48 0 0 0-.328.39c-.554 4.157.726 7.19 2.253 9.188a10.7 10.7 0 0 0 2.287 2.233c.346.244.652.42.893.533q.18.085.293.118a1 1 0 0 0 .101.025 1 1 0 0 0 .1-.025q.114-.034.294-.118c.24-.113.547-.29.893-.533a10.7 10.7 0 0 0 2.287-2.233c1.527-1.997 2.807-5.031 2.253-9.188a.48.48 0 0 0-.328-.39c-.651-.213-1.75-.56-2.837-.855C9.552 1.29 8.531 1.067 8 1.067c-.53 0-1.552.223-2.662.524zM5.072.56C6.157.265 7.31 0 8 0s1.843.265 2.928.56c1.11.3 2.229.655 2.887.87a1.54 1.54 0 0 1 1.044 1.262c.596 4.477-.787 7.795-2.465 9.99a11.8 11.8 0 0 1-2.517 2.453 7 7 0 0 1-1.048.625c-.28.132-.581.24-.829.24s-.548-.108-.829-.24a7 7 0 0 1-1.048-.625 11.8 11.8 0 0 1-2.517-2.453C1.928 10.487.545 7.169 1.141 2.692A1.54 1.54 0 0 1 2.185 1.43 63 63 0 0 1 5.072.56"/>
          <path d="M7.001 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0M7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.553.553 0 0 1-1.1 0z"/></svg>
        Your dates from <b> {{ scheckin | date : "yyyy-MM-dd" }} </b>to <b> {{ scheckout | date : "yyyy-MM-dd" }} </b> are available to book.
      </h6>
      <div class="checkout-summary-details">
        <div class="table-responsive">
          <h6 class="pr-2">
            Total Price (including Rent, Cleaning, Tax and Fees) :
            <b>$ {{ rates | number : "1.0" : "en-US" }}</b>
          </h6>
          <h6 class="pr-2" *ngIf=" securityDeposit > 0">
            ***Please NOTE***<br/>This Property Requires An Additional Refundable Deposit Of <b>${{securityDeposit}}</b>
          </h6><br>
          <h6 class="pr-2">
            ***Please NOTE***<br/>Rates include all taxes and fees. Rates and availability are not guaranteed until the time of booking.
          </h6>
        </div>
      </div>
    </div>
    <div class="text-center">
      <button class="btn t-btn" (click)="openInquiryModal('PROPERTY INQUIRY')">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 640 640"><path d="M568.4 37.7C578.2 34.2 589 36.7 596.4 44C603.8 51.3 606.2 62.2 602.7 72L424.7 568.9C419.7 582.8 406.6 592 391.9 592C377.7 592 364.9 583.4 359.6 570.3L295.4 412.3C290.9 401.3 292.9 388.7 300.6 379.7L395.1 267.3C400.2 261.2 399.8 252.3 394.2 246.7C388.6 241.1 379.6 240.7 373.6 245.8L261.2 340.1C252.1 347.7 239.6 349.7 228.6 345.3L70.1 280.8C57 275.5 48.4 262.7 48.4 248.5C48.4 233.8 57.6 220.7 71.5 215.7L568.4 37.7z"/></svg>
        Inquire or Book Now "No Obligation"
      </button>
    </div>
  </div>
  <div class="modal-footer">
    <button class="btn btn-secondary" (click)="modal.close()">Close</button>
  </div>
</ng-template>
<!--show Rates info Modal Ends Here-->

<ngx-spinner
  bdColor="rgba(0, 0, 0, 0.8)"
  size="medium"
  color="#fff"
  type="ball-circus"
  [fullScreen]="true"
>
  <p id="spinner" style="color: white">Please Wait...</p>
</ngx-spinner>

<div class="property-gallery">
    <div class="gallery-container">
        <!-- Main Gallery Section -->
        <div class="main-image-section">
            <div class="image-counter">
                <span class="current-slide">{{ currentSlide + 1 }}</span> /
                <span class="total-slides">{{ images.length }}</span>
            </div>

            <!-- Main Swiper Container -->
            <div class="swiper main-swiper" #mainSwiper>
                <div class="swiper-wrapper">
                    <div class="swiper-slide" *ngFor="let image of images; let i = index">
                        <div class="main-image-wrapper">
                            <img [src]="image.URLTxt"
                                 [alt]="image.alt || image.Caption"
                                 loading="lazy"
                                 decoding="async"
                                 class="main-image img-fluid">
                            <div class="image-number">
                                {{ getImageDisplayNumber(image, i) }}
                            </div>
                            <div *ngIf="image.Caption" class="image-caption">
                                {{ image.Caption }}
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Navigation buttons -->
                <div class="swiper-button-next"></div>
                <div class="swiper-button-prev"></div>

                <!-- Pagination dots -->
                <div class="swiper-pagination"></div>
            </div>
        </div>

        <!-- Thumbnail Gallery Section -->
        <div class="thumbnail-section">
            <div class="swiper thumb-swiper" #thumbSwiper>
                <div class="swiper-wrapper">
                    <div class="swiper-slide thumbnail-wrapper"
                         *ngFor="let image of images; let i = index"
                         [class.active]="currentSlide === i"
                         (click)="goToSlide(i)">
                        <img [src]="image.thumbnailUrl || image.URLTxt"
                             [alt]="image.alt || image.Caption"
                             class="thumbnail img-fluid"
                             loading="lazy"
                             decoding="async"
                             [attr.data-src]="image.thumbnailUrl || image.URLTxt"
                             >
                        <div class="thumbnail-number">
                            {{ getImageDisplayNumber(image, i) }}
                        </div>
                    </div>
                </div>

                <!-- MARK: Updated - Arrows positioned over thumbnails -->
                <div class="swiper-button-prev-thumb custom-arrow thumb-nav-arrow thumb-nav-prev">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M15 18l-6-6 6-6"/>
                    </svg>
                </div>

                <div class="swiper-button-next-thumb custom-arrow thumb-nav-arrow thumb-nav-next">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M9 18l6-6-6-6"/>
                    </svg>
                </div>
            </div>
        </div>

    </div>
</div>

<div class="container">
    <div class="row mb-2">
        <div class="col-md-8">
                <br>
                <!-- NAV TABS -->
                <div class="nav-tabs-container">
                  <tabset #propertyTabs
                          (selectTab)="onTabSelect($event)"
                          class="custom-tabset"
                          >

                      <tab *ngFor="let tab of tabs"
                         [heading]="tab.title"
                        [id]="tab.id"
                        [active]="isTabActive(tab.id)"
                        (select)="selectTab(tab.id, $event)"
                        class="nav-tab-item">

                            <!-- Tab Content -->
                            <div class="tab-content-panel">
                                <ng-container [ngSwitch]="tab.id">
                                    <!-- OVERVIEW TAB -->
                                    <div *ngSwitchCase="'overview'" class="tab-pane container active">
                                        <div class="card flex-md-row mb-4 shadow-lg">
                                            <div class="card-body d-flex flex-column align-items-start">
                                                <div class="row w-100">
                                                    <div class="col-lg-8 col-md-12">
                                                        <div class="property-header-provider-name">
                                                            <div *ngIf="propertyDetailData?.originalLink" class="t-header">Provider: &nbsp;<span class="t-text">{{ propertyDetailData?.Provider }}</span></div>
                                                            <div *ngIf="propertyDetailData?.originalLink" class="t-header">Headline: &nbsp;<span class="t-text">{{ propertyDetailData?.Headline }}</span></div>
                                                        </div>
                                                        <h3 class="mb-0 pb-1">
                                                            <span class="mr-2 t-header">Property ID:
                                                                <span class="t-text">{{ propertyDetailData?.list_id }}</span>
                                                            </span>
                                                          <span *ngIf="isMobile || isIOS">
                                                            <br>
                                                            <a (click)="gotoRateAvailSection()" href="JavaScript:void(0);"
                                                               class="btn btn-primary">CLICK HERE TO GET RATES</a>
                                                          </span>
                                                        </h3>

                                                        <h3 class="mb-0 pb-1">
                                                            <span class="mr-2 t-header">Property Manager ID:
                                                                <span class="t-text">
                                                                  {{ propertyDetailData?.APC === 'wander' ? (propertyDetailData?.slug || 'N/A') :
                                                                    (propertyDetailData?.remote_product_id || 'N/A') }}
                                                                </span>
                                                            </span>
                                                        </h3>

                                                        <ul class="list-group p-0 list-inline">
                                                            <hr/>
                                                            <li>
                                                                Destination: <span class="fw-normal">{{ propertyDetailData?.RegionContinent }}</span>
                                                            </li>
                                                            <li class="pt-2">
                                                                Country/Island:
                                                                <span class="fw-normal">{{ propertyDetailData?.CountryIsland }}</span>
                                                            </li>
                                                            <li class="pt-2">
                                                                State/Region/Province:<span class="fw-normal">{{ propertyDetailData?.StateNme }}</span>
                                                            </li>
                                                            <li class="pt-2">
                                                                City/Area: <span class="fw-normal">{{ propertyDetailData?.City }}</span>
                                                            </li>
                                                            <li class="py-2">
                                                                Neighborhood/Community:
                                                                <span class="fw-normal">{{ propertyDetailData?.Neighborhood }}</span>
                                                            </li>
                                                        </ul>
                                                        <ul class="list-group pt-3 property-sub-details">
                                                            <li class="list-group-item">
                                                                <span>
                                                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><path d="M298.2 72.6C310.5 61.2 329.5 61.2 341.7 72.6L432 156.3L432 144C432 126.3 446.3 112 464 112L496 112C513.7 112 528 126.3 528 144L528 245.5L565.8 280.6C575.4 289.6 578.6 303.5 573.8 315.7C569 327.9 557.2 336 544 336L528 336L528 512C528 547.3 499.3 576 464 576L176 576C140.7 576 112 547.3 112 512L112 336L96 336C82.8 336 71 327.9 66.2 315.7C61.4 303.5 64.6 289.5 74.2 280.6L298.2 72.6zM304 384C277.5 384 256 405.5 256 432L256 528L384 528L384 432C384 405.5 362.5 384 336 384L304 384z"/></svg>
                                                                    &nbsp;Property Type :<span class="fw-normal">{{ propertyDetailData?.Category }}</span>
                                                                </span>
                                                            </li>
                                                            <li class="list-group-item">
                                                                <span>
                                                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><path d="M320 80C377.4 80 424 126.6 424 184C424 241.4 377.4 288 320 288C262.6 288 216 241.4 216 184C216 126.6 262.6 80 320 80zM96 152C135.8 152 168 184.2 168 224C168 263.8 135.8 296 96 296C56.2 296 24 263.8 24 224C24 184.2 56.2 152 96 152zM0 480C0 409.3 57.3 352 128 352C140.8 352 153.2 353.9 164.9 357.4C132 394.2 112 442.8 112 496L112 512C112 523.4 114.4 534.2 118.7 544L32 544C14.3 544 0 529.7 0 512L0 480zM521.3 544C525.6 534.2 528 523.4 528 512L528 496C528 442.8 508 394.2 475.1 357.4C486.8 353.9 499.2 352 512 352C582.7 352 640 409.3 640 480L640 512C640 529.7 625.7 544 608 544L521.3 544zM472 224C472 184.2 504.2 152 544 152C583.8 152 616 184.2 616 224C616 263.8 583.8 296 544 296C504.2 296 472 263.8 472 224zM160 496C160 407.6 231.6 336 320 336C408.4 336 480 407.6 480 496L480 512C480 529.7 465.7 544 448 544L192 544C174.3 544 160 529.7 160 512L160 496z"/></svg>
                                                                    &nbsp;Max Guests :<span class="fw-normal">{{ sleepsCt }}</span>
                                                                </span>
                                                            </li>
                                                            <li class="list-group-item">
                                                                <span>
                                                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><path d="M64 96C81.7 96 96 110.3 96 128L96 352L320 352L320 224C320 206.3 334.3 192 352 192L512 192C565 192 608 235 608 288L608 512C608 529.7 593.7 544 576 544C558.3 544 544 529.7 544 512L544 448L96 448L96 512C96 529.7 81.7 544 64 544C46.3 544 32 529.7 32 512L32 128C32 110.3 46.3 96 64 96zM144 256C144 220.7 172.7 192 208 192C243.3 192 272 220.7 272 256C272 291.3 243.3 320 208 320C172.7 320 144 291.3 144 256z"/></svg>
                                                                    &nbsp; Bedrooms :
                                                                    <span class="fw-normal">{{ bedroomCt }}</span>
                                                                </span>
                                                            </li>
                                                            <li class="list-group-item">
                                                                <span>
                                                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><path d="M160 141.3C160 134 165.9 128 173.3 128C176.8 128 180.2 129.4 182.7 131.9L197.6 146.8C194 155.9 192.1 165.7 192.1 176C192.1 195.9 199.3 214 211.3 228C206 237.2 207.3 249.1 215.1 257C224.5 266.4 239.7 266.4 249 257L353 153C362.4 143.6 362.4 128.4 353 119.1C345.2 111.2 333.2 110 324 115.3C310 103.3 291.9 96.1 272 96.1C261.7 96.1 251.8 98.1 242.8 101.6L227.9 86.6C213.4 72.1 193.7 64 173.3 64C130.6 64 96 98.6 96 141.3L96 320C78.3 320 64 334.3 64 352C64 369.7 78.3 384 96 384L96 432C96 460.4 108.4 486 128 503.6L128 544C128 561.7 142.3 576 160 576C177.7 576 192 561.7 192 544L192 528L448 528L448 544C448 561.7 462.3 576 480 576C497.7 576 512 561.7 512 544L512 503.6C531.6 486 544 460.5 544 432L544 384C561.7 384 576 369.7 576 352C576 334.3 561.7 320 544 320L160 320L160 141.3z"/></svg>
                                                                    &nbsp; Bathrooms :
                                                                    <span class="fw-normal">{{ bathroomCt }}</span>
                                                                </span>
                                                            </li>
                                                            <li class="list-group-item">
                                                                <span>
                                                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><path d="M320 96C239.2 96 174.5 132.8 127.4 176.6C80.6 220.1 49.3 272 34.4 307.7C31.1 315.6 31.1 324.4 34.4 332.3C49.3 368 80.6 420 127.4 463.4C174.5 507.1 239.2 544 320 544C400.8 544 465.5 507.2 512.6 463.4C559.4 419.9 590.7 368 605.6 332.3C608.9 324.4 608.9 315.6 605.6 307.7C590.7 272 559.4 220 512.6 176.6C465.5 132.9 400.8 96 320 96zM176 320C176 240.5 240.5 176 320 176C399.5 176 464 240.5 464 320C464 399.5 399.5 464 320 464C240.5 464 176 399.5 176 320zM320 256C320 291.3 291.3 320 256 320C244.5 320 233.7 317 224.3 311.6C223.3 322.5 224.2 333.7 227.2 344.8C240.9 396 293.6 426.4 344.8 412.7C396 399 426.4 346.3 412.7 295.1C400.5 249.4 357.2 220.3 311.6 224.3C316.9 233.6 320 244.4 320 256z"/></svg>
                                                                    &nbsp; View Type :<span class="fw-normal">{{ propertyDetailData?.ViewType }}</span>
                                                                </span>
                                                            </li>
                                                            <li class="list-group-item">
                                                                <span>
                                                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><path d="M298.5 156.9C312.8 199.8 298.2 243.1 265.9 253.7C233.6 264.3 195.8 238.1 181.5 195.2C167.2 152.3 181.8 109 214.1 98.4C246.4 87.8 284.2 114 298.5 156.9zM164.4 262.6C183.3 295 178.7 332.7 154.2 346.7C129.7 360.7 94.5 345.8 75.7 313.4C56.9 281 61.4 243.3 85.9 229.3C110.4 215.3 145.6 230.2 164.4 262.6zM133.2 465.2C185.6 323.9 278.7 288 320 288C361.3 288 454.4 323.9 506.8 465.2C510.4 474.9 512 485.3 512 495.7L512 497.3C512 523.1 491.1 544 465.3 544C453.8 544 442.4 542.6 431.3 539.8L343.3 517.8C328 514 312 514 296.7 517.8L208.7 539.8C197.6 542.6 186.2 544 174.7 544C148.9 544 128 523.1 128 497.3L128 495.7C128 485.3 129.6 474.9 133.2 465.2zM485.8 346.7C461.3 332.7 456.7 295 475.6 262.6C494.5 230.2 529.6 215.3 554.1 229.3C578.6 243.3 583.2 281 564.3 313.4C545.4 345.8 510.3 360.7 485.8 346.7zM374.1 253.7C341.8 243.1 327.2 199.8 341.5 156.9C355.8 114 393.6 87.8 425.9 98.4C458.2 109 472.8 152.3 458.5 195.2C444.2 238.1 406.4 264.3 374.1 253.7z"/></svg>
                                                                    &nbsp; Pets :
                                                                    <span class="fw-normal">{{ propertyDetailData?.PetFriendly }}</span>
                                                                </span>
                                                            </li>
                                                        </ul>
                                                    </div>

                                                    <div class="col-lg-4 col-md-12">
                                                        <div *ngIf="propertyDetailData?.originalLink" class="text-end">
                                                            <a href="{{ propertyDetailData?.originalLink }}" class="btn btn-primary mb-2" target="_blank">PROPERTY MANAGER SITE</a>
                                                        </div>

                                                        <div class="text-end" *ngIf="propertyDetailData?.originalLink">
                                                            <a (click)="sendManagersiteURL()" class="btn btn-primary mb-2">DESTINIQUE PROPERTY PAGE</a>
                                                        </div>

                                                        <div class="text-end" *ngIf="getCheckinCheckout && propertyDetailData?.originalLink">
                                                            <a (click)="getRatesAndShowPopup()" class="btn btn-primary mb-2">Get Rates</a>
                                                        </div>

                                                        <div class="text-end" *ngIf="propertyDetailData?.originalLink">
                                                            <a (click)="getPropertyId()" class="btn btn-primary mb-2">PROPERTY Id</a>
                                                        </div>

                                                        <div class="text-end" *ngIf="propertyDetailData?.originalLink">
                                                            <a target="_blank" *ngIf="propertyDetailData?.originalLink" (click)="sendDestiniqueManageIamgeURL()" class="btn btn-primary mb-2">DESTINIQUE MANAGE IMAGE PAGE</a>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- AMENITIES TAB -->
                                    <div *ngSwitchCase="'amenities'" class="container tab-pane">
                                        <div class="card mb-4 shadow-lg h-md-250">
                                            <div class="card-body d-flex flex-column">
                                              <div class="row">
                                                <div
                                                  *ngFor="let category of amenity; let catIndex = index"
                                                  class="col-md-12 amenities-content"
                                                >
                                                  <h4 [ngClass]="'fontfa-montserrat'">
                                                    {{ category.categoryName }}
                                                  </h4>
                                                  <ul>
                                                    <li
                                                      [ngClass]="'fontfa-montserrat'"
                                                      *ngFor="
                                                    let amenityItem of category.amenity;
                                                    let amenIndex = index
                                                    "
                                                    >
                                                      {{ amenityItem.name }}
                                                    </li>
                                                  </ul>
                                                </div>
                                              </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- DESCRIPTION TAB -->
                                    <div *ngSwitchCase="'description'" class="container tab-pane">
                                        <div class="card flex-md-row mb-4 shadow-lg h-md-250">
                                            <div class="card-body d-flex flex-column align-items-start">
                                                <h3 class="mb-3">Property Description</h3>
                                                <p class="card-text mb-auto p-description"
                                                  [ngClass]="'fontfa-montserrat'"
                                                  [innerHTML]="propertyDetailData?.Description"></p>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- AVAILABILITY TAB -->
                                    <div *ngSwitchCase="'availability'" class="container tab-pane">
                                      <div class="card flex-md-row mb-4 shadow-lg h-md-250">
                                        <div class="card-body d-flex flex-column align-items-start">
                                          <h3 class="mb-1">Availability</h3>
                                          <small class="text-muted mb-3">Color-coded availability status</small>

                                          <!-- Dual Calendar Container -->
                                          <div class="row g-4">
                                            <!-- Left Calendar -->
                                            <div class="col-lg-6">
                                              <div class="calendar-section">
                                                <ngb-datepicker
                                                  [firstDayOfWeek]="7"
                                                  [startDate]="getDateStruct(leftCalendarDate)"
                                                  [navigation]="'arrows'"
                                                  [outsideDays]="'hidden'"
                                                  [displayMonths]="1"
                                                  class="custom-datepicker"
                                                  [markDisabled]="markDisabled"
                                                  (navigate)="onLeftCalendarNavigate($event)"
                                                  [dayTemplate]="customDayTemplate">
                                                </ngb-datepicker>
                                              </div>
                                            </div>

                                            <!-- Right Calendar -->
                                            <div class="col-lg-6">
                                              <div class="calendar-section">
                                                <ngb-datepicker
                                                  [firstDayOfWeek]="7"
                                                  [startDate]="getDateStruct(rightCalendarDate)"
                                                  [navigation]="'arrows'"
                                                  [outsideDays]="'hidden'"
                                                  [displayMonths]="1"
                                                  class="custom-datepicker"
                                                  [markDisabled]="markDisabled"
                                                  (navigate)="onRightCalendarNavigate($event)"
                                                  [dayTemplate]="customDayTemplate">
                                                </ngb-datepicker>
                                              </div>
                                            </div>

                                            <!-- Define the custom day template ONCE outside the datepickers -->
                                            <ng-template #customDayTemplate let-date="date" let-currentMonth="currentMonth"
                                                         let-selected="selected" let-disabled="disabled" let-focused="focused">
                                              <div class="custom-day-wrapper"
                                                   [class.date-fully-available]="getDateCustomClass(date) === 'date-fully-available'"
                                                   [class.date-fully-unavailable]="getDateCustomClass(date) === 'date-fully-unavailable'"
                                                   [class.date-am-only]="getDateCustomClass(date) === 'date-am-only'"
                                                   [class.date-pm-only]="getDateCustomClass(date) === 'date-pm-only'"
                                                   [class.date-no-checkin]="getDateCustomClass(date) === 'date-no-checkin'"
                                                   [class.disabled]="disabled"
                                                   [class.focused]="focused"
                                                   [class.selected]="selected"
                                                   [title]="getDateStatusText(date)">
                                                {{ date.day }}
                                              </div>
                                            </ng-template>
                                          </div>

                                          <!-- Enhanced Legend -->
                                          <div class="legend mt-4 pt-3 border-top">
                                            <div class="row justify-content-center g-3">
                                              <div class="col-auto">
                                                <div class="d-flex align-items-center">
                                                  <div class="legend-dot fully-available me-2"></div>
                                                  <small>Available</small>
                                                </div>
                                              </div>
                                              <div class="col-auto">
                                                <div class="d-flex align-items-center">
                                                  <div class="legend-dot fully-unavailable me-2"></div>
                                                  <small>Not Available</small>
                                                </div>
                                              </div>
                                              <div class="col-auto">
                                                <div class="d-flex align-items-center">
                                                  <div class="legend-dot am-only me-2"></div>
                                                  <small>AM Available</small>
                                                </div>
                                              </div>
                                              <div class="col-auto">
                                                <div class="d-flex align-items-center">
                                                  <div class="legend-dot pm-only me-2"></div>
                                                  <small>PM Available</small>
                                                </div>
                                              </div>
                                              <div class="col-auto">
                                                <div class="d-flex align-items-center">
                                                  <div class="legend-dot no-checkin me-2"></div>
                                                  <small>Available (No Check-in)</small>
                                                </div>
                                              </div>
                                            </div>
                                          </div>
                                        </div>
                                      </div>
                                    </div>

                                    <!-- REVIEWS TAB -->
                                    <div *ngSwitchCase="'reviews'" class="container tab-pane">
                                      <!--
                                        <app-add-property-reviews></app-add-property-reviews>
                                      -->
                                    </div>
                                </ng-container>
                            </div>
                      </tab>
                  </tabset>
                </div>
        </div>

        <!-- Right Column (Social Media, Rates, etc.) -->
        <div class="col-md-4">
            <div class="row">
                <div class="col-12">
                    <div class="property-details-s-media">
                        Share this property to
                    </div>
                </div>
                <div class="col-12">
                    <div class="share-btn-container">
                        <a href="{{ facebookURL }}" class="facebook-btn" target="_blank">
                            <svg fill="currentColor" class="social-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><path d="M240 363.3L240 576L356 576L356 363.3L442.5 363.3L460.5 265.5L356 265.5L356 230.9C356 179.2 376.3 159.4 428.7 159.4C445 159.4 458.1 159.8 465.7 160.6L465.7 71.9C451.4 68 416.4 64 396.2 64C289.3 64 240 114.5 240 223.4L240 265.5L174 265.5L174 363.3L240 363.3z"/></svg>
                        </a>

                        <a href="https://www.instagram.com/destinique_travel/" class="instagram-btn" target="_blank">
                            <svg fill="currentColor" class="social-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><path d="M320.3 205C256.8 204.8 205.2 256.2 205 319.7C204.8 383.2 256.2 434.8 319.7 435C383.2 435.2 434.8 383.8 435 320.3C435.2 256.8 383.8 205.2 320.3 205zM319.7 245.4C360.9 245.2 394.4 278.5 394.6 319.7C394.8 360.9 361.5 394.4 320.3 394.6C279.1 394.8 245.6 361.5 245.4 320.3C245.2 279.1 278.5 245.6 319.7 245.4zM413.1 200.3C413.1 185.5 425.1 173.5 439.9 173.5C454.7 173.5 466.7 185.5 466.7 200.3C466.7 215.1 454.7 227.1 439.9 227.1C425.1 227.1 413.1 215.1 413.1 200.3zM542.8 227.5C541.1 191.6 532.9 159.8 506.6 133.6C480.4 107.4 448.6 99.2 412.7 97.4C375.7 95.3 264.8 95.3 227.8 97.4C192 99.1 160.2 107.3 133.9 133.5C107.6 159.7 99.5 191.5 97.7 227.4C95.6 264.4 95.6 375.3 97.7 412.3C99.4 448.2 107.6 480 133.9 506.2C160.2 532.4 191.9 540.6 227.8 542.4C264.8 544.5 375.7 544.5 412.7 542.4C448.6 540.7 480.4 532.5 506.6 506.2C532.8 480 541 448.2 542.8 412.3C544.9 375.3 544.9 264.5 542.8 227.5zM495 452C487.2 471.6 472.1 486.7 452.4 494.6C422.9 506.3 352.9 503.6 320.3 503.6C287.7 503.6 217.6 506.2 188.2 494.6C168.6 486.8 153.5 471.7 145.6 452C133.9 422.5 136.6 352.5 136.6 319.9C136.6 287.3 134 217.2 145.6 187.8C153.4 168.2 168.5 153.1 188.2 145.2C217.7 133.5 287.7 136.2 320.3 136.2C352.9 136.2 423 133.6 452.4 145.2C472 153 487.1 168.1 495 187.8C506.7 217.3 504 287.3 504 319.9C504 352.5 506.7 422.6 495 452z"/></svg>
                        </a>

                        <a href="{{ twitterURL }}" class="twitter-btn" target="_blank">
                            <svg fill="currentColor" class="social-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><path d="M453.2 112L523.8 112L369.6 288.2L551 528L409 528L297.7 382.6L170.5 528L99.8 528L264.7 339.5L90.8 112L236.4 112L336.9 244.9L453.2 112zM428.4 485.8L467.5 485.8L215.1 152L173.1 152L428.4 485.8z"/></svg>
                        </a>

                        <a href="https://www.pinterest.com/destiniquetravel/" class="pinterest-btn" target="_blank">
                            <svg fill="currentColor" class="social-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><path d="M332 70.5C229.4 70.5 128 138.9 128 249.6C128 320 167.6 360 191.6 360C201.5 360 207.2 332.4 207.2 324.6C207.2 315.3 183.5 295.5 183.5 256.8C183.5 176.4 244.7 119.4 323.9 119.4C392 119.4 442.4 158.1 442.4 229.2C442.4 282.3 421.1 381.9 352.1 381.9C327.2 381.9 305.9 363.9 305.9 338.1C305.9 300.3 332.3 263.7 332.3 224.7C332.3 158.5 238.4 170.5 238.4 250.5C238.4 267.3 240.5 285.9 248 301.2C234.2 360.6 206 449.1 206 510.3C206 529.2 208.7 547.8 210.5 566.7C213.9 570.5 212.2 570.1 217.4 568.2C267.8 499.2 266 485.7 288.8 395.4C301.1 418.8 332.9 431.4 358.1 431.4C464.3 431.4 512 327.9 512 234.6C512 135.3 426.2 70.5 332 70.5z"/></svg>
                        </a>

                        <a href="{{ whatsappURL }}" class="whatsapp-btn" target="_blank">
                            <svg fill="currentColor" class="social-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><path d="M476.9 161.1C435 119.1 379.2 96 319.9 96C197.5 96 97.9 195.6 97.9 318C97.9 357.1 108.1 395.3 127.5 429L96 544L213.7 513.1C246.1 530.8 282.6 540.1 319.8 540.1L319.9 540.1C442.2 540.1 544 440.5 544 318.1C544 258.8 518.8 203.1 476.9 161.1zM319.9 502.7C286.7 502.7 254.2 493.8 225.9 477L219.2 473L149.4 491.3L168 423.2L163.6 416.2C145.1 386.8 135.4 352.9 135.4 318C135.4 216.3 218.2 133.5 320 133.5C369.3 133.5 415.6 152.7 450.4 187.6C485.2 222.5 506.6 268.8 506.5 318.1C506.5 419.9 421.6 502.7 319.9 502.7zM421.1 364.5C415.6 361.7 388.3 348.3 383.2 346.5C378.1 344.6 374.4 343.7 370.7 349.3C367 354.9 356.4 367.3 353.1 371.1C349.9 374.8 346.6 375.3 341.1 372.5C308.5 356.2 287.1 343.4 265.6 306.5C259.9 296.7 271.3 297.4 281.9 276.2C283.7 272.5 282.8 269.3 281.4 266.5C280 263.7 268.9 236.4 264.3 225.3C259.8 214.5 255.2 216 251.8 215.8C248.6 215.6 244.9 215.6 241.2 215.6C237.5 215.6 231.5 217 226.4 222.5C221.3 228.1 207 241.5 207 268.8C207 296.1 226.9 322.5 229.6 326.2C232.4 329.9 268.7 385.9 324.4 410C359.6 425.2 373.4 426.5 391 423.9C401.7 422.3 423.8 410.5 428.4 397.5C433 384.5 433 373.4 431.6 371.1C430.3 368.6 426.6 367.2 421.1 364.5z"/></svg>
                        </a>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-12 check-availability-and-rates">
                    <div class="card mb-1 shadow-lg property-rates">
                        <div class="card-header">
                            <h5 id="prop_details_rates_avail_sec" class="my-0 fw-normal text-center">
                                Check Availability and Rates
                            </h5>
                        </div>
                        <div class="card-body">
                            <form [formGroup]="datesForm" (ngSubmit)="onDatesFormSubmit()">
                                <div class="row">
                                    <div class="col-12 col-lg-8">
                                        <div class="mb-3">
                                          <div *ngIf="isDatesFormSubmitting || isCalendarLoading" class="spinner-border spinner-border-sm"></div>
                                          <label for="checkin_checkout_date" class="form-label required">CheckIn - CheckOut</label>
                                          <input
                                            id="checkin_checkout_date"
                                            type="text"
                                            class="form-control"
                                            formControlName="searchCalender"
                                            [placeholder]="getPlaceholderText()"
                                            ngbDatepicker
                                            #dpr="ngbDatepicker"
                                            [displayMonths]="1"
                                            [navigation]="'arrows'"
                                            [outsideDays]="'hidden'"
                                            [firstDayOfWeek]="7"
                                            [dayTemplate]="rangeDayTemplate"
                                            [markDisabled]="markDisabled"
                                            (dateSelect)="onDateSelection($event, dpr)"
                                            (click)="dpr.toggle()"
                                            [value]="formatDateRange()"
                                            [autoClose]="'outside'"
                                            readonly
                                          />

                                          <ng-template #rangeDayTemplate let-date="date"
                                                       let-selected="selected"
                                                       let-disabled="disabled"
                                                       let-focused="focused">
                                            <div class="custom-day-wrapper"
                                                 [class.date-fully-available]="getDateCustomClass(date) === 'date-fully-available'"
                                                 [class.date-fully-unavailable]="getDateCustomClass(date) === 'date-fully-unavailable'"
                                                 [class.date-am-only]="getDateCustomClass(date) === 'date-am-only'"
                                                 [class.date-pm-only]="getDateCustomClass(date) === 'date-pm-only'"
                                                 [class.date-no-checkin]="getDateCustomClass(date) === 'date-no-checkin'"
                                                 [class.range-start]="isRangeStart(date)"
                                                 [class.range-end]="isRangeEnd(date)"
                                                 [class.in-range]="isInsideRange(date)"
                                                 [class.disabled]="disabled"
                                                 [class.focused]="focused"
                                                 [class.selected]="selected"
                                                 [title]="getDateStatusText(date)">
                                              {{ date.day }}
                                            </div>
                                          </ng-template>

                                          <!-- Validation message using getter -->
                                          <div *ngIf="searchCalenderControl?.invalid && searchCalenderControl?.touched"
                                               class="invalid-feedback d-block">
                                              <span *ngIf="searchCalenderControl?.hasError('required')">
                                                Please select check-in and check-out dates
                                              </span>
                                          </div>
                                        </div>
                                    </div>
                                    <div class="col-12 col-lg-4">
                                        <div class="mb-3">
                                            <label for="guests-number" class="form-label">Guests</label>
                                            <input id="guests-number" type="number" class="form-control"
                                                   formControlName="sleeps"
                                                   min="1" name="guests-number">
                                          <div *ngIf="sleepsControl?.invalid && sleepsControl?.touched"
                                               class="invalid-feedback d-block">
                                              <span *ngIf="sleepsControl?.hasError('min')">
                                                Number of guests must be at least 1
                                              </span>
                                          </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-12">
                                        <div class="mb-3 m-0">
                                            <button type="submit" class="btn w-100">
                                              <span *ngIf="isDatesFormSubmitting || isCalendarLoading" class="spinner-border spinner-border-sm mr-1"></span>Submit
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                    <div class="mb-2">
                        <button type="button"
                                class="btn property-inquiry-btn"
                                (click)="openInquiryModal('PROPERTY INQUIRY')">
                          PROPERTY INQUIRY
                        </button>

                        <button type="button"
                                class="btn book-now-btn"
                                (click)="openInquiryModal('REQUEST TO BOOK')">
                          REQUEST TO BOOK
                        </button>
                    </div>

                    <div class="card mb-1 shadow-lg">
                      <div class="card-body p-0">
                        <div id="property-map" class="map-container"></div>
                      </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
